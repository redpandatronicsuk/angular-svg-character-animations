function makeLetters2ShapeObj(a){return out={},a.pic2letterObj.forEach(function(a){a.letters.forEach(function(b){out[b]=a.id,out[b.toUpperCase()]=a.id})}),out}var prestonBlair={pic2letterObj:[{letters:["a","i"],id:"a-i"},{letters:["e"],id:"e"},{letters:["o"],id:"o"},{letters:["u"],id:"u"},{letters:["c","d","g","h","j","k","n","r","s","t","th","x","y","z"],id:"c-d-g-h-k-n-r-s-th-y-z"},{letters:["f","v"],id:"f-v"},{letters:["l"],id:"l"},{letters:["m","b","p"],id:"m-b-p"},{letters:["w","q"],id:"w-q"},{letters:[],id:"rest"}]};angular.module("angularSvgCharacterAnimationsApp",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch","adaptive.speech"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("angularSvgCharacterAnimationsApp").controller("MainCtrl",["$scope",function(a){}]),angular.module("angularSvgCharacterAnimationsApp").controller("AnimationControlCtrl",["$scope","$timeout","$speechSynthetis",function(a,b,c){function d(a,b){var c=d3.interpolate(a,b);return function(a){return c(a)}}function e(a,b,c){""===b.select(a)[0][0].style.display?j.select(a).style("display","none"):j.select(a).style("display","inline")}function f(b,c,e){j.select(b).transition().duration(a.letterMS).attrTween("d",function(){return d(j.select(b).attr("d"),c.select(b).attr("d"))})}function g(a,b,c,d){e(a,c,d),f(a+" "+b,c,d)}function h(b,c,e,f){j.selectAll(b+" "+c).transition().duration(a.letterMS).attrTween("d",function(a,f){return"inline"===e.select(b+":nth-child("+(f+1)+") "+c)[0][0].style.display?j.select(b+":nth-child("+(f+1)+") "+c).style("display","none"):j.select(b+":nth-child("+(f+1)+") "+c).style("display","inline"),d(j.select(b+":nth-child("+(f+1)+") "+c).attr("d"),e.select(b+":nth-child("+(f+1)+") "+c).attr("d"))})}a.currentShape="a",a.letterMS=75,a.spacePause=50,a.commaPause=1e4,a.fullstopPause=150,a.letter2shape=makeLetters2ShapeObj(prestonBlair),a.speak=function(b){c.speak(b,"en-UK");var d=0;b.split(".").forEach(function(b){b.split(",").forEach(function(b){b.split(" ").forEach(function(b){for(var c=b.trim(),e=0;e<c.length;e++){var f=c.charAt(e);"t"==f&&"h"==c.charAt(e+1)&&(f+="h",e++);var g=a.letter2shape[f];a.changeToShapeDelay(g,d),d+=a.letterMS}a.changeToShapeDelay("rest",d),d+=a.spacePause}),a.changeToShapeDelay("rest",d),d+=a.commaPause}),a.changeToShapeDelay("rest",d),d+=a.fullstopPause})};var i,j;a.initSvg=function(){i=d3.select("#mouths"),j=i.select("#current")},a.changeToShape=function(a){console.log("changeToShape",a);var b=i.select("#"+a);g(".tooth-left","path",b,j),g(".tooth-right","path",b,j),e(".tooth-row",b,j),h(".tooth-row g","path",b,j),g(".lips","",b,j),g(".tounge","",b,j),g(".outer-tounge","",b,j)},a.changeToShapeDelay=function(a,c){console.log("changeToShapeDealy",a,c),b(function(){var b=i.select("#"+a);g(".tooth-left","path",b,j),g(".tooth-right","path",b,j),e(".tooth-row",b,j),h(".tooth-row g","path",b,j),g(".lips","",b,j),g(".tounge","",b,j),g(".outer-tounge","",b,j)},c)}}]);